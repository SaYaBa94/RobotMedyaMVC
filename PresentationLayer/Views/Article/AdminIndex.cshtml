@model ArticleListViewModel
@{
    ViewData["Title"] = "Makeleler";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}


<div class="container-fluid m-2">
    <h3>Makaleler</h3>
    <div class="col-12 m-auto">

        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Kategori</th>
                    <th scope="col">Yazar</th>
                    <th scope="col">Başlık</th>
                    <th scope="col">Yazı</th>
                    <th scope="col">Küçük Resim</th>
                    <th scope="col">Aktiflik</th>
                    <th scope="col">İşlemler</th>

                </tr>
            </thead>
            <tbody>

                @foreach (var article in Model.Articles)
                {

                <tr>
                    <th scope="row">@article.ArticleID</th>
                    <td>@article.Category.CategoryName</td>
                    <td>@article.Author.AuthorName @article.Author.AuthorSurname</td>
                    <td>@article.ArticleTitle</td>
                    <td><div style="max-height: 100px; max-width:50em;  overflow:hidden;"> @Html.Raw(article.ArticleBody)</div></td>
                    <td><div style="max-width:20em; overflow:hidden">@article.ArticleThumbnail</div></td>
                    <td><div class="col">@article.IsEnable</div></td>
                    <td>
                        <div class="row">
                            <a href="/Article/ArticleUpdate/@article.ArticleID" class="btn btn-warning ">Güncelle</a>
                            <a href="/Article/DeleteArticle/@article.ArticleID" class="btn btn-danger">Delete</a>

                            @if (article.IsEnable == true)
                                {
                            <a href="/Article/DeactiveArticle/@article.ArticleID" class="btn btn-danger">Pasif Yap</a>
                                }
                                else
                                {
                            <a href="/Article/ActiveArticle/@article.ArticleID" class="btn btn-success">Aktif Yap</a>
                                }


                        </div>
                    </td>

                </tr>

                }
            </tbody>
        </table>
        @using (Html.BeginForm("AddArticle", "Article", FormMethod.Post))
        {
        <div class="container-fluid py-4">

            <div class="form form-group font-weight-bolder  mt-3">
                <div class="form-row">
                    <div class="col-form-label d-flex align-items-center col-1">Kategori :</div>

                    <div class="col">
                        @Html.DropDownListFor(a => a.Article.CategoryID, (List<SelectListItem>)ViewBag.kategoriler)
                    </div>
                </div>

                <div class="form-row">
                    <div class="col-form-label d-flex align-items-center col-1">Yazar :</div>

                    <div class="col">
                        @Html.DropDownListFor(a => a.Article.AuthorID, (List<SelectListItem>)ViewBag.yazarlar)
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-form-label d-flex align-items-center col-1">Başlık :</div>

                    <div class="col">
                        @Html.TextBoxFor(a => a.Article.ArticleTitle)
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-form-label d-flex align-items-center col-1 ">Gövde :</div>

                    <div class="col">
                        @Html.TextAreaFor(a => a.Article.ArticleBody)

                    </div>
                </div>
                <div class="form-row">
                    <div class="col-form-label d-flex align-items-center col-1">Küçük Resim :</div>

                    <div class="col">
                        @Html.TextBoxFor(a => a.Article.ArticleThumbnail)
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-form-label d-flex align-items-center col-1">Aktiflik :</div>

                    <div class="col">
                        @Html.CheckBoxFor(a => a.Article.IsEnable)
                    </div>
                </div>
            </div>
            <div class="form-row">
                <button class="btn btn-success px-5">Ekle</button>
            </div>
        </div>
        }

    </div>
</div>

<script src="~/lib/ckeditor/ckeditor.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>